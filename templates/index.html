<!DOCTYPE html>
<html lang="pt-BR">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Raio - Processamento de Áudio com IA</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}
		.container {
			background-color: #f5f5f5;
			padding: 20px;
			border-radius: 5px;
			margin-bottom: 20px;
		}
		.results {
			margin-top: 20px;
		}
		.topic-results {
			margin-top: 10px;
			padding: 10px;
			background-color: #fff;
			border-radius: 5px;
		}
	</style>
</head>
<body>
	<h1>Raio - Processamento de Áudio com IA</h1>
	
	<div class="container">
		<form method="POST" enctype="multipart/form-data">
			<div>
				<label for="audio">Selecione o arquivo de áudio:</label><br>
				<input type="file" id="audio" name="audio" accept="audio/*" required>
			</div>
			
			<div style="margin-top: 20px;">
				<label>Selecione os temas para análise:</label><br>
				<input type="checkbox" name="topics" value="drogas" id="drogas">
				<label for="drogas">Drogas</label><br>
				
				<input type="checkbox" name="topics" value="morte" id="morte">
				<label for="morte">Morte</label><br>
				
				<input type="checkbox" name="topics" value="crimes_sexuais" id="crimes_sexuais">
				<label for="crimes_sexuais">Crimes Sexuais</label>

				<input type="checkbox" name="topics" value="familia" id="familia">
				<label for="familia">Família</label>
			</div>
			
			<button type="submit" style="margin-top: 20px;">Processar Áudio</button>
		</form>
	</div>

	{% if results %}
	<div class="results">
		<h2>Resultados</h2>
		
		<div class="container">
			<h3>Visualização do Áudio</h3>
			<img src="{{ results.waveform }}" alt="Audio Waveform">
		</div>
		
		<div class="container">
			<h3>Transcrição</h3>
			<p>{{ results.transcription }}</p>
		</div>
		
		<div class="container">
			<h3>Temas Detectados</h3>
			{% for topic, occurrences in results.topics.items() %}
			<div class="topic-results">
				<h4>{{ topic|title }}</h4>
				{% if occurrences %}
					<ul>
					{% for occurrence in occurrences %}
						<li>{{ occurrence }}</li>
					{% endfor %}
					</ul>
				{% else %}
					<p>Nenhuma ocorrência encontrada.</p>
				{% endif %}
			</div>
			{% endfor %}
		</div>
	</div>
	{% endif %}
</body>
</html>